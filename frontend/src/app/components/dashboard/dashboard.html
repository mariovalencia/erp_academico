<div class="dashboard-container">
  <!-- Sidebar -->
  <aside 
    class="sidebar" 
    [class.collapsed]="isSidebarCollapsed()"
  >
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">üéì</span>
        @if (!isSidebarCollapsed()) {
          <span class="logo-text">ERP Universitario</span>
        }
      </div>
      <button 
        class="toggle-btn" 
        (click)="toggleSidebar()"
        [title]="isSidebarCollapsed() ? 'Expandir men√∫' : 'Contraer men√∫'"
      >
        {{ isSidebarCollapsed() ? '‚Üí' : '‚Üê' }}
      </button>
    </div>

    <nav class="sidebar-nav">
      @for (item of menuItems(); track item.label) {
        <a 
          [routerLink]="item.route" 
          class="nav-item"
          routerLinkActive="active"
        >
          <span class="nav-icon">{{ item.icon }}</span>
          @if (!isSidebarCollapsed()) {
            <span class="nav-label">{{ item.label }}</span>
          }
          @if (item.badge && !isSidebarCollapsed()) {
            <span class="nav-badge">{{ item.badge }}</span>
          }
        </a>
      }
    </nav>

    <div class="sidebar-footer">
      <div class="user-info">
        <div class="user-avatar">
          {{ authService.getUserInitials() }}
        </div>
        @if (!isSidebarCollapsed()) {
          <div class="user-details">
            <span class="user-name">
              {{ currentUser()?.first_name }} {{ currentUser()?.last_name }}
            </span>
            <span class="user-email">{{ currentUser()?.email }}</span>
          </div>
        }
      </div>
      <button class="logout-btn" (click)="logout()">
        <span class="logout-icon">üö™</span>
        @if (!isSidebarCollapsed()) {
          <span>Cerrar Sesi√≥n</span>
        }
      </button>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header class="content-header">
      <div class="header-left">
        <h1 class="greeting">
          {{ getGreeting() }}, {{ currentUser()?.first_name || 'Estudiante' }}!
        </h1>
        <p class="welcome-text">Bienvenido al panel de control</p>
      </div>
      <div class="header-actions">
        <button class="notification-btn" title="Notificaciones">
          <span class="notification-icon">üîî</span>
          <span class="notification-badge">3</span>
        </button>
        <div class="user-menu">
          <div class="header-avatar">
            {{ authService.getUserInitials() }}
          </div>
        </div>
      </div>
    </header>

    <!-- Loading State -->
    @if (isLoading()) {
      <div class="loading-container">
        <div class="spinner"></div>
        <p>Cargando dashboard...</p>
      </div>
    } @else {
      <!-- Summary Cards -->
      <section class="summary-section">
        <h2>Resumen General</h2>
        <div class="cards-grid">
          @for (card of summaryCards(); track card.title) {
            <div class="summary-card" [class]="'card-' + card.color">
              <div class="card-content">
                <div class="card-icon">{{ card.icon }}</div>
                <div class="card-info">
                  <h3 class="card-value">{{ card.value }}</h3>
                  <p class="card-title">{{ card.title }}</p>
                </div>
              </div>
            </div>
          }
        </div>
      </section>

      <!-- Main Content Area -->
      <section class="content-section">
        <div class="content-grid">
          <!-- Recent Activity -->
          <div class="content-card">
            <div class="card-header">
              <h3>Actividad Reciente</h3>
              <button class="see-all-btn">Ver todo</button>
            </div>
            <div class="activity-list">
              <div class="activity-item">
                <div class="activity-icon">üìö</div>
                <div class="activity-content">
                  <p>Nueva tarea en Matem√°ticas</p>
                  <span class="activity-time">Hace 2 horas</span>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon">üìä</div>
                <div class="activity-content">
                  <p>Calificaci√≥n publicada en F√≠sica</p>
                  <span class="activity-time">Hace 1 d√≠a</span>
                </div>
              </div>
              <div class="activity-item">
                <div class="activity-icon">üí¨</div>
                <div class="activity-content">
                  <p>Nuevo mensaje del profesor</p>
                  <span class="activity-time">Hace 2 d√≠as</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Upcoming Events -->
          <div class="content-card">
            <div class="card-header">
              <h3>Pr√≥ximos Eventos</h3>
              <button class="see-all-btn">Ver calendario</button>
            </div>
            <div class="events-list">
              <div class="event-item">
                <div class="event-date">
                  <span class="event-day">15</span>
                  <span class="event-month">MAR</span>
                </div>
                <div class="event-content">
                  <p>Examen Final - Matem√°ticas</p>
                  <span class="event-time">09:00 AM - Aula 201</span>
                </div>
              </div>
              <div class="event-item">
                <div class="event-date">
                  <span class="event-day">18</span>
                  <span class="event-month">MAR</span>
                </div>
                <div class="event-content">
                  <p>Entrega Proyecto Programaci√≥n</p>
                  <span class="event-time">11:59 PM - Online</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    }
  </main>
</div>